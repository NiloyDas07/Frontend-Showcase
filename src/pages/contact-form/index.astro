---
import "@/assets/css/contact-form/styles.css";
// Component Imports
import MainLayout from "@/layouts/main.astro";
import Form from "@/components/contact-form/Form.jsx";
import Toast from "@/components/Toast.astro";

// Page Metadata
const content = {
  title: "Contact Form | Frontend Showcase",
  description:
    'This is a solution to the "Contact Form challenge" on Frontend Mentor.',
};

// Image Imports
---

<MainLayout content={content}>
  <div
    class="bg-[var(--contact-form-background)] min-h-[100vh] flex items-center justify-center text-[var(--contact-form-text)] p-[5%]"
  >
    <div class="max-w-[740px] bg-white w-11/12 p-10 rounded-lg space-y-5">
      <h1 class="text-start text-inherit font-inherit text-2xl font-bold">
        Contact Us
      </h1>
      <Form client:load />
      <Toast client:load />
    </div>
  </div>
</MainLayout>

<script>
  window.addEventListener("submission-success", (e) => {
    const toast = document.querySelector("#toast");
    if (toast) {
      const toastHeader = document.createElement("h2");
      toastHeader.classList.add(
        "text-lg",
        "font-semibold",
        "text-white",
        "mb-2",
        "flex",
        "items-center",
        "gap-2"
      );
      const icon = document.createElement("img");
      icon.src = "/src/assets/images/contact-form/icon-success-check.svg";
      const toastHeaderText = document.createElement("span");
      toastHeaderText.textContent = "Message Sent!";
      toastHeader.append(icon, toastHeaderText);

      toast.appendChild(toastHeader);

      const toastMessage = document.createElement("p");
      toastMessage.textContent = (e as CustomEvent).detail;
      toastMessage.classList.add("text-white/90");
      toast.appendChild(toastMessage);

      toast.classList.remove("hidden");
      toast.classList.replace(
        "bg-blue-600/95",
        "bg-[var(--contact-form-accent-dark)]"
      );
      setTimeout(() => {
        toast.classList.add("hidden");
        toast.classList.replace(
          "bg-[var(--contact-form-accent-dark)]",
          "bg-blue-600/95"
        );
        toast.replaceChildren();
      }, 3000);
    }
  });
</script>
